<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.8.19"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <title>HElib: Building and installing HElib</title>
        <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="dynsections.js"></script>
        <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
        <link href="doxygen.css" rel="stylesheet" type="text/css" />
        <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
        <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
		<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100;1,700&family=Merriweather&family=Merriweather+Sans&family=Open+Sans&family=Poppins:ital@1&family=Roboto:ital,wght@0,400;1,300;1,900&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
        <script type="text/javascript" src="jquery.smartmenus.js"></script>
        <!-- SmartMenus jQuery Bootstrap Addon -->
        <script type="text/javascript" src="jquery.smartmenus.bootstrap.js"></script>
        <!-- SmartMenus jQuery plugin -->
    </head>
    <body style="font-family: 'Merriweather', serif;">
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand">HElib Implementing Homomorphic Encryption</a>
                </div>
            </div>
        </nav>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part -->
<!-- Generated by Doxygen 1.8.19 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Building and installing HElib </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The HElib build, install, and regression tests suite have been built and tested on Ubuntu 18.04, Ubuntu 20.04, Fedora 31, Fedora 32, CentOS 7.7, CentOS 8.1, and macOS Mojave 10.14.</p>
<p>There are two different ways to build and install HElib. The first one will automatically download and build the GMP and NTL dependencies and pack the libraries in a relocatable folder. The second way, instead, requires the dependencies to be installed by you and available in the system.</p>
<p><b>Please read these instructions in full to better choose the type of build that is better for you.</b></p>
<h1><a class="anchor" id="autotoc_md12"></a>
General prerequisites</h1>
<ul>
<li>GNU make &gt;= 3.82</li>
<li>pthreads</li>
<li>git &gt;= 1.8.3 (required to build and run the HElib test suite)</li>
</ul>
<p><b>Linux environment:</b></p><ul>
<li>g++ &gt;= 7.3.1</li>
<li>cmake &gt;= 3.10.2</li>
</ul>
<p><b>macOS environment:</b></p><ul>
<li>Apple clang &gt;= 11.0.0 (available with Xcode &gt;= 11.0)</li>
<li>Xcode Command Line Tools (can be installed with the command <code>xcode-select --install</code> in a teminal)</li>
<li>cmake &gt;= 3.17.3 (available from <a href="https://cmake.org/">CMake</a> or <a href="https://www.macports.org/">MacPorts Project</a> and <a href="https://brew.sh/">Homebrew</a> as packages)</li>
</ul>
<p><b>For development:</b></p><ul>
<li>clang-format &gt;= 9.0.0 (available with your linux distribution and for macOS from <a href="https://www.macports.org/">MacPorts Project</a> and <a href="https://brew.sh/">Homebrew</a> as packages)</li>
</ul>
<h1><a class="anchor" id="autotoc_md13"></a>
Option 1: package build (recommended for most users)</h1>
<p>This option bundles HElib and its dependencies (NTL and GMP) in one directory which can then be moved around freely on the system. NTL and GMP will be automatically fetched and compiled. It can be installed globally (i.e. under <code>/usr/local</code>), which is the default option if no <code>CMAKE_INSTALL_PREFIX</code> is specified, but this should only be done with caution as existing versions of NTL, GMP, or HElib will be overwritten. These additional two prerequisites are required in this case:</p>
<ul>
<li>m4 &gt;= 1.4.16</li>
<li>patchelf &gt;= 0.9 (if building on Linux)</li>
</ul>
<p>Please note that if changing from library build to package build, it is safer to use a clean build directory.</p>
<h2><a class="anchor" id="autotoc_md14"></a>
Instructions</h2>
<ol type="1">
<li>Create a build directory, typically as a sibling of <code>src</code>: <div class="fragment"><div class="line">cd HElib</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
</div><!-- fragment --></li>
<li>Run the cmake configuration step, specifying that you want a package build (via -DPACKAGE_BUILD=ON) and saying where you would like the installation to be. To install in <code>/home/alice/helib_install</code>, for example: <div class="fragment"><div class="line">cmake -DPACKAGE_BUILD=ON -DCMAKE_INSTALL_PREFIX=/home/alice/helib_install ..</div>
</div><!-- fragment --></li>
</ol>
<p>Extra options can be specified here, such as enabling HElib tests with <code>-DENABLE_TEST=ON</code>. See later section entitled "HElib build
options" for details.</p>
<ol type="1">
<li>Compile, with an optional number of threads specified (16 in this example). The output of this will be in the relocatable folder <code>helib_pack</code>: <div class="fragment"><div class="line">make -j16</div>
</div><!-- fragment --></li>
<li>(optional) If step 2 was performed with <code>-DENABLE_TEST=ON</code>, HElib tests can be run as follows: <div class="fragment"><div class="line">ctest -R helib_check</div>
</div><!-- fragment --></li>
</ol>
<p>Detailed HElib-specific test logs can be found in <code>dependencies/Build/helib_external/Testing/Temporary/LastTest.log</code>.</p>
<ol type="1">
<li>(optional) Run the install step, to copy the folder <code>helib_pack</code> to <code>${CMAKE_INSTALL_PREFIX}</code> (in this example <code>/home/alice/helib_install</code>): <div class="fragment"><div class="line">make install</div>
</div><!-- fragment --></li>
</ol>
<p>of course, if the <code>CMAKE_INSTALL_PREFIX</code> was kept as the default <code>/usr/local</code> or some other system-wide path, step 5 may require <code>sudo</code> privileges.</p>
<h1><a class="anchor" id="autotoc_md15"></a>
Option 2: library build (advanced)</h1>
<p>This option involves building HElib on its own, linking against pre-existing dependencies (NTL and GMP) on the system. In this way, the HElib library can be moved around, but its dependencies (NTL and GMP) cannot, as they are absolute paths. For this option, you must build GMP &gt;=6.0.0 and NTL &gt;=11.4.3 yourself. For details on how to do this, please see the section on building dependencies later. It is assumed throughout this installation option that the environment variables <code>$GMPDIR</code> and <code>$NTLDIR</code> are set to point to the installation directories of GMP and NTL respectively.</p>
<p>Please note that if changing from package build to library build, it is safer to use a clean build directory.</p>
<ol type="1">
<li>Create a build directory, typically as a sibling of <code>src</code>:</li>
</ol>
<div class="fragment"><div class="line">cd HElib</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
</div><!-- fragment --><ol type="1">
<li>Run the cmake configuration step, specifying where to find NTL and GMP. If not specified, system-wide locations such as <code>/usr/local/lib</code> will be searched. To install in <code>/home/alice/helib_install</code>, for example:</li>
</ol>
<div class="fragment"><div class="line">cmake -DGMP_DIR=&quot;${GMPDIR}&quot; -DNTL_DIR=&quot;${NTLDIR}&quot; -DCMAKE_INSTALL_PREFIX=/home/alice/helib_install ..</div>
</div><!-- fragment --><p>Extra options can be specified here, such as enabling HElib tests with <code>-DENABLE_TEST=ON</code>. See later section entitled "HElib build options" for details.</p>
<ol type="1">
<li>Compile, with an optional number of threads specified (16 in this example):</li>
</ol>
<div class="fragment"><div class="line">make -j16</div>
</div><!-- fragment --><ol type="1">
<li>(optional) If step 2 was performed with <code>-DENABLE_TEST=ON</code>, tests can be run as follows: <div class="fragment"><div class="line">ctest</div>
</div><!-- fragment --></li>
</ol>
<p>Detailed HElib test logs can be found in <code>Testing/Temporary/LastTest.log</code>.</p>
<ol type="1">
<li>Run the install step, to copy the files to <code>${CMAKE_INSTALL_PREFIX}</code> (in this example <code>/home/alice/helib_install</code>): <div class="fragment"><div class="line">make install</div>
</div><!-- fragment --></li>
</ol>
<p>of course, if the <code>CMAKE_INSTALL_PREFIX</code> was kept as the default <code>/usr/local</code> or some other system-wide path, step 5 may require <code>sudo</code> privileges.</p>
<h1><a class="anchor" id="autotoc_md16"></a>
Building dependencies (for option 2)</h1>
<h2><a class="anchor" id="autotoc_md17"></a>
GMP</h2>
<p>Many distributions come with GMP pre-installed. If not, you can install GMP as follows.</p>
<ol type="1">
<li>Download GMP from <a href="http://www.gmplib.org">http://www.gmplib.org</a> &ndash; make sure that you get GMP &gt;=6.0.0 (current version is 6.2.0).</li>
<li>Decompress and cd into the gmp directory (e.g., <code>gmp-6.2.0</code>).</li>
<li>GMP is compiled in the standard unix way: <div class="fragment"><div class="line">./configure</div>
<div class="line">make</div>
<div class="line">sudo make install</div>
</div><!-- fragment --></li>
</ol>
<p>This will install GMP into <code>/usr/local</code> by default.</p>
<p><b>NOTE:</b> For further options when building GMP, run <code>./configure --help</code> in step 3.</p>
<h2><a class="anchor" id="autotoc_md18"></a>
NTL</h2>
<p>You can install NTL as follows:</p>
<ol type="1">
<li>Download NTL &gt;=11.4.3 (current version is 11.4.3) from <a href="http://www.shoup.net/ntl/download.html">http://www.shoup.net/ntl/download.html</a></li>
<li>Decompress and cd into the directory, e.g., <code>ntl-11.4.3/src</code></li>
<li>NTL is configured, built and installed in the standard Unix way (but remember to specify the following flags to <code>configure</code>): <div class="fragment"><div class="line">./configure NTL_GMP_LIP=ON SHARED=on  NTL_THREADS=on NTL_THREAD_BOOST=on</div>
<div class="line">make</div>
<div class="line">sudo make install</div>
</div><!-- fragment --></li>
</ol>
<p>This should install NTL into <code>/usr/local</code>.</p>
<p><b>NOTE:</b> For further options when building NTL, run <code>./configure --help</code> in step 3.</p>
<p><b>NOTE</b>: if linking against a non-system GMP, pass <code>GMP_PREFIX=&lt;path/to/gmp&gt;</code> to the <code>./configure</code> step.</p>
<h1><a class="anchor" id="autotoc_md19"></a>
HElib build options</h1>
<h2><a class="anchor" id="autotoc_md20"></a>
Generic options</h2>
<ul>
<li><code>BUILD_SHARED=ON/OFF</code> (default is <code>OFF</code>): Build as a shared library. Note that building HElib (regardless of <code>BUILD_SHARED</code>) will fail if NTL is not built as a shared library. The default for NTL is static library, to build NTL as a shared library use <code>./configure SHARED=on</code> in step 1.</li>
<li><code>CMAKE_BUILD_TYPE</code>: (default is <code>RelWithDebInfo</code>): Choose the type of build, options are: <code>Debug</code>, <code>RelWithDebInfo</code>, <code>Release</code>, <code>MinSizeRel</code>.</li>
<li><code>CMAKE_INSTALL_PREFIX</code>: Desired installation directory for HElib.</li>
<li><code>ENABLE_TEST=ON/OFF</code> (default is <code>OFF</code>): Enable building of tests. This will include an automatic download step for the google test framework stable release (googletest v1.10.0)</li>
<li><code>ENABLE_THREADS=ON/OFF</code> (default is <code>ON</code>): Enable threading support. This must be on if and only if NTL was built with <code>NTL_THREADS=ON</code>.</li>
<li><code>PEDANTIC_BUILD=ON/OFF</code> (default is <code>ON</code>): Use <code>-Wall -Wpedantic -Wextra -Werror</code> during build.</li>
<li><code>HELIB_DEBUG=ON/OFF</code> (default is <code>OFF</code>): Activate the debug module when building HElib (by defining the <code>HELIB_DEBUG</code> macro). When the debug module is active, this generates extra information used for debugging purposes. <code>HELIB_DEBUG</code> will propagate to programs using HElib, when using cmake. When this is enabled, programs using HElib will generate a warning during configuration. This is to remind the user that use of the debug module can cause issues, such as <code>sigsegv</code>, if initialized incorrectly.</li>
</ul>
<h2><a class="anchor" id="autotoc_md21"></a>
Parameters specific to option 1 (package build)</h2>
<ul>
<li><code>PACKAGE_DIR</code>: Location that a package build will be installed to. Defaults to <code>${CMAKE_INSTALL_PREFIX}/helib_pack</code>.</li>
<li><code>FETCH_GMP</code>: Whether or not to fetch and build GMP. Defaults to <code>ON</code>. If set to <code>OFF</code>, there should either exist a system-installed GMP library, or <code>GMP_DIR</code> should point to a valid GMP prefix.</li>
<li><code>GMP_DIR</code>: Prefix of the GMP library. Ignored if <code>FETCH_GMP=ON</code>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md22"></a>
Parameters specific to option 2 (library build)</h2>
<ul>
<li><code>ENABLE_LEGACY_TEST=ON/OFF</code> (default is <code>OFF</code>): Build old test system (deprecated).</li>
<li><code>GMP_DIR</code>: Prefix of the GMP library.</li>
<li><code>NTL_DIR</code>: Prefix of the NTL library.</li>
</ul>
<h1><a class="anchor" id="autotoc_md23"></a>
Using HElib in a project</h1>
<h2><a class="anchor" id="autotoc_md24"></a>
Standard method</h2>
<p>After <code>make install</code> has been run in either option 1 or option 2, one can find the required shared library files to link against in <code>lib</code> and the header files in <code>include</code>. These can be used in the preferred way with your build system of choice.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
Package build with cmake</h2>
<p>Another, easier way is possible if you are using HElib in a cmake project.</p>
<ol type="1">
<li>Include the following line in your <code>CMakeLists.txt</code>: <div class="fragment"><div class="line">find_package(helib)</div>
</div><!-- fragment --></li>
<li>Run your <code>cmake</code> step with <code>-Dhelib_DIR=&lt;helib install prefix&gt;/share/cmake/helib</code>.</li>
</ol>
<h2><a class="anchor" id="autotoc_md26"></a>
Example</h2>
<p>Full working examples of cmake-based projects which uses HElib can be found in the <code>examples</code> directory. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.19
</small></address>
</body>
        <script type="text/javascript" src="doxy-boot.js"></script>
</html>
